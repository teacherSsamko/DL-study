# [6주차] 심화과제: LangChain과 Streamlit으로 자신만의 LLM 서비스 구현

## 목표

---

이 프로젝트는 GitHub 레포지토리 코드 리뷰 챗봇을 구현하는 것이 목표입니다. 사용자가 GitHub 레포지토리 주소를 입력하면 해당 레포지토리의 코드를 분석하여 잘한 점과 개선할 점을 평가합니다.

### 주요 기능

- [ ] GitHub 레포지토리 URL 입력 받기
    - Streamlit의 text input을 사용하여 사용자로부터 GitHub 레포지토리 URL을 입력받습니다.
    - 입력된 URL이 유효한 GitHub 레포지토리 주소인지 검증합니다.

- [ ] 레포지토리 코드 분석
    - GitHub API를 사용하여 레포지토리의 코드를 가져옵니다.
    - 주요 파일들의 내용을 읽어와 분석합니다.
    - 코드의 구조, 패턴, 스타일 등을 파악합니다.

- [ ] GPT를 활용한 코드 리뷰
    - LangChain을 사용하여 GPT에게 코드 리뷰를 요청합니다.
    - 다음 항목들을 평가하도록 합니다:
        1. 코드의 잘된 점
            - 코드 구조
            - 네이밍 컨벤션
            - 모듈화/재사용성
            - 문서화
        2. 개선이 필요한 점
            - 잠재적인 버그
            - 성능 이슈
            - 보안 취약점
            - 코드 스타일 개선사항

- [ ] 리뷰 결과 표시
    - 분석 결과를 보기 좋게 정리하여 표시합니다.
    - 잘된 점과 개선점을 구분하여 명확하게 보여줍니다.
    - 필요한 경우 코드 예시와 함께 구체적인 개선 방안을 제시합니다.

### 구현 시 참고사항

1. GitHub API 사용
    - GitHub API를 통해 레포지토리 접근 시 인증 토큰 필요
    - API 호출 제한에 유의

2. 대용량 코드 처리
    - 큰 레포지토리의 경우 모든 코드를 한 번에 처리하기 어려울 수 있음
    - 중요 파일 위주로 분석하거나 청크 단위로 처리하는 전략 필요

3. 사용자 경험
    - 분석 중임을 알리는 로딩 표시 필요
    - 에러 발생 시 적절한 메시지 표시
    - 결과를 이해하기 쉽게 구조화하여 표시

## Prompts

- [initial_prompt](prompts.py)
    - 코드 분석 요청
    - 개선방안에 대한 구체적인 코드 예제 제공

- [with_links_prompt](prompts.py)
    - 코드 분석 요청 + 관련 파일 링크 포함
    - 개선방안에 대한 간단한 문장 제공

- [score_prompt](prompts.py)
    - 코드 분석 요청 + 점수 산정 요청
    - 점수화를 통해 openai를 평가지표로 사용할 수 있음

### 현재 방식의 한계

- 코드 분석 시 모든 파일을 prompt에 포함하여 사용하고 있기 때문에, 대규모 repository의 경우 프롬프트 크기 제한에 걸릴 수 있음


## Vector DB 활용

- 코드 분석 시 모든 파일을 prompt에 포함하여 사용하고 있기 때문에, 대규모 repository의 경우 프롬프트 크기 제한에 걸릴 수 있음
- 따라서, 벡터 DB를 활용하여 코드 분석 결과를 저장하고, 이를 통해 코드 분석을 수행하는 방식으로 개선

### 결과

- 해당 레포지터리에 대한 질의응답을 할 수 있어졌지만
- 초기 분석 결과의 질이 떨어짐

```
초기 코드 리뷰 결과
프로젝트 개요: 이 프로젝트는 특정 URL에 대한 상태를 주기적으로 체크하는 기능을 가진 Flask 애플리케이션입니다. 주요 기능은 다음과 같습니다:
'/health_check' 엔드포인트를 통해 특정 URL의 상태를 체크하고 Slack으로 알림을 보냅니다.
'/upload' 엔드포인트를 통해 파일을 업로드하고, '/upscaling' 엔드포인트를 통해 업로드된 파일에 대한 작업을 실행합니다.
'/check_video_upscaling'와 '/check_image_upscaling' 엔드포인트를 통해 비디오 업스케일링 및 이미지 업스케일링 작업의 상태를 체크합니다.
상세 평가: A. 코드 품질 (40점)
코드 구조 및 설계 (10점): 코드 구조는 간단한 Flask 애플리케이션으로 구성되어 있습니다. 엔드포인트들이 각각의 기능을 수행하도록 구현되어 있습니다.

가독성 및 네이밍 (10점): 코드의 가독성은 일반적으로 좋습니다. 함수와 변수의 네이밍도 명확하고 일관성이 있습니다.

모듈화/재사용성 (10점): 코드는 단일 파일에 구현되어 있으며, 일부 기능은 'slackBot.py' 모듈로 분리되어 재사용 가능합니다.

에러 처리 (10점): 코드에서 발생할 수 있는 일부 예외 상황을 처리하는 것은 보이지만, 모든 예외를 적절하게 처리하는 것은 아닙니다. 예외 처리를 더 강화하면 좋을 것입니다.

B. 문서화 (20점)

README 완성도 (10점): README 파일이 제공되지 않아 프로젝트의 목적, 설치 및 실행 방법, 사용 예제 등을 알 수 없습니다.

코드 주석 (10점): 코드에는 일부 설명 주석이 있지만, 일부 함수나 복잡한 부분에 대한 상세한 설명은 제공되지 않습니다.

C. 보안 및 성능 (20점)

보안 취약점 (10점): 보안 취약점을 평가하기 위해 해당하는 부분을 확인할 수 없습니다.

성능 최적화 (10점): 성능 최적화를 평가하기 위해 해당하는 부분을 확인할 수 없습니다.

D. 프로젝트 완성도 (20점)

기능 구현 완성도 (10점): 기능은 구현되어 있어 보이지만, 세부 구현 내용과 작동 여부를 확인할 수 없습니다.

테스트 커버리지 (10점): 테스트 코드가 제공되지 않아 기능의 테스트 커버리지를 알 수 없습니다.

총점 및 등급: 총점: 정보의 부족으로 인해 평가 불가능

개선 제안:

README 파일을 작성하여 프로젝트의 목적, 설치 및 실행 방법, 사용 예제 등을 상세하게 설명해야 합니다.
코드 주석을 추가하여 각 함수와 복잡한 부분의 동작을 설명해야 합니다.
예외 처리를 개선하여 모든 예외 상황을 적절하게 처리해야 합니다.
성능 최적화 및 보안 취약점에 대한 평가와 개선이 필요합니다.
관련 파일의 GitHub 링크:

app.py
slackBot.py
```